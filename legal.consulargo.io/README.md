# é¢†äº‹è®¤è¯ç®¡ç†ç³»ç»Ÿ

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„é¢†äº‹è®¤è¯ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«åå°ç®¡ç†ç•Œé¢å’ŒåŠ¨æ€å±•ç¤ºé¡µé¢ã€‚

## åŠŸèƒ½ç‰¹æ€§

### åå°ç®¡ç†ç³»ç»Ÿ
- âœ… ç”¨æˆ·ç™»å½•è®¤è¯
- âœ… è®°å½•ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰
- âœ… æ‰¹é‡æ“ä½œï¼ˆåˆ é™¤ã€éšè—/æ˜¾ç¤ºï¼‰
- âœ… æœç´¢å’Œç­›é€‰åŠŸèƒ½
- âœ… äºŒç»´ç è‡ªåŠ¨ç”Ÿæˆå’Œä¸‹è½½
- âœ… ç”¨æˆ·ç®¡ç†ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
- âœ… å¯†ç ä¿®æ”¹

### åŠ¨æ€å±•ç¤ºé¡µé¢
- âœ… æ ¹æ®QRç åŠ¨æ€æ˜¾ç¤ºéªŒè¯ç»“æœ
- âœ… å“åº”å¼è®¾è®¡ï¼ˆæ”¯æŒç§»åŠ¨ç«¯ï¼‰
- âœ… é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

## æŠ€æœ¯æ ˆ

### åç«¯
- **Node.js** + **Express** + **TypeScript**
- **SQLite** æ•°æ®åº“
- **JWT** ç”¨æˆ·è®¤è¯
- **QRCode** äºŒç»´ç ç”Ÿæˆ
- **bcryptjs** å¯†ç åŠ å¯†

### å‰ç«¯
- **React** + **TypeScript**
- **Ant Design** UIç»„ä»¶åº“
- **React Router** è·¯ç”±ç®¡ç†
- **Axios** HTTPè¯·æ±‚

## é¡¹ç›®ç»“æ„

```
legal.consulargo.io/
â”œâ”€â”€ backend/                 # åç«¯APIæœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/         # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ uploads/            # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/               # Reactå‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/          # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ services/       # APIæœåŠ¡
â”‚   â”‚   â””â”€â”€ contexts/       # ä¸Šä¸‹æ–‡
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ check/                  # é™æ€é¡µé¢
â”‚   â”œâ”€â”€ sticker8691.html    # åŸå§‹é™æ€é¡µé¢
â”‚   â””â”€â”€ sticker.html # åŠ¨æ€å±•ç¤ºé¡µé¢
â””â”€â”€ database/               # æ•°æ®åº“æ–‡ä»¶
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£…åç«¯ä¾èµ–
cd backend
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd ../frontend
npm install
```

### 2. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
npm run dev
```

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:3001` å¯åŠ¨

### 3. å¯åŠ¨å‰ç«¯åº”ç”¨

```bash
cd frontend
npm start
```

å‰ç«¯åº”ç”¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨

### 4. è®¿é—®ç³»ç»Ÿ

- **åå°ç®¡ç†**: http://localhost:3000
- **é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·**: admin / admin123

## ä½¿ç”¨è¯´æ˜

### ç™»å½•ç³»ç»Ÿ
1. è®¿é—® http://localhost:3000
2. ä½¿ç”¨é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ç™»å½•ï¼šadmin / admin123

### æ·»åŠ è®°å½•
1. ç‚¹å‡»"æ·»åŠ è®°å½•"
2. å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µ
3. ç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆ20ä½éšæœºQRç 
4. ä¿å­˜åå¯ä»¥ä¸‹è½½å¯¹åº”çš„äºŒç»´ç 

### ç®¡ç†è®°å½•
1. åœ¨"è®°å½•ç®¡ç†"é¡µé¢æŸ¥çœ‹æ‰€æœ‰è®°å½•
2. æ”¯æŒæœç´¢ã€ç­›é€‰å’Œæ‰¹é‡æ“ä½œ
3. å¯ä»¥ç¼–è¾‘ã€åˆ é™¤æˆ–éšè—è®°å½•
4. å¯ä»¥ä¸‹è½½å•ä¸ªæˆ–æ‰¹é‡ä¸‹è½½äºŒç»´ç 

### æŸ¥çœ‹éªŒè¯ç»“æœ
1. ç”Ÿæˆçš„äºŒç»´ç åŒ…å«URLï¼š`check/sticker?qr=20ä½éšæœºå­—ç¬¦`
2. æ‰«æäºŒç»´ç æˆ–è®¿é—®URLæŸ¥çœ‹éªŒè¯ç»“æœ
3. åŠ¨æ€é¡µé¢ä¼šä»APIè·å–æ•°æ®å¹¶æ˜¾ç¤º

## APIæ¥å£

### è®¤è¯ç›¸å…³
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- `POST /api/auth/change-password` - ä¿®æ”¹å¯†ç 

### è®°å½•ç®¡ç†
- `GET /api/records` - è·å–è®°å½•åˆ—è¡¨
- `POST /api/records` - åˆ›å»ºæ–°è®°å½•
- `PUT /api/records/:id` - æ›´æ–°è®°å½•
- `DELETE /api/records/:id` - åˆ é™¤è®°å½•
- `DELETE /api/records` - æ‰¹é‡åˆ é™¤è®°å½•
- `PATCH /api/records/status` - æ‰¹é‡æ›´æ–°çŠ¶æ€

### äºŒç»´ç ç›¸å…³
- `GET /api/qrcode/download/:qrCode` - ä¸‹è½½äºŒç»´ç 
- `POST /api/qrcode/regenerate/:id` - é‡æ–°ç”ŸæˆäºŒç»´ç 
- `GET /api/qrcode/info/:qrCode` - è·å–äºŒç»´ç ä¿¡æ¯

### ç”¨æˆ·ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰
- `GET /api/users` - è·å–ç”¨æˆ·åˆ—è¡¨
- `POST /api/users` - åˆ›å»ºç”¨æˆ·
- `PUT /api/users/:id` - æ›´æ–°ç”¨æˆ·
- `DELETE /api/users/:id` - åˆ é™¤ç”¨æˆ·

## æ•°æ®åº“ç»“æ„

### users è¡¨
- id: ç”¨æˆ·ID
- username: ç”¨æˆ·å
- password: åŠ å¯†å¯†ç 
- email: é‚®ç®±
- role: è§’è‰²ï¼ˆadmin/userï¼‰
- created_at: åˆ›å»ºæ—¶é—´

### records è¡¨
- id: è®°å½•ID
- qr_code: 20ä½éšæœºQRç 
- legalization_no: æ³•å¾‹ç¼–å·
- issue_date: å‘å¸ƒæ—¥æœŸ
- place_of_issue: å‘å¸ƒåœ°ç‚¹
- legalization_type: è®¤è¯ç±»å‹
- authorized_officer: æˆæƒå®˜å‘˜
- document_owner: æ–‡æ¡£æ‰€æœ‰è€…
- document_type: æ–‡æ¡£ç±»å‹
- status: çŠ¶æ€ï¼ˆactive/inactiveï¼‰
- created_by: åˆ›å»ºè€…ID
- created_at: åˆ›å»ºæ—¶é—´
- updated_at: æ›´æ–°æ—¶é—´

## éƒ¨ç½²è¯´æ˜

### ğŸš€ GitHub Pages éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### è‡ªåŠ¨éƒ¨ç½²
1. **Fork æˆ–å…‹éš†é¡¹ç›®åˆ°æ‚¨çš„GitHubä»“åº“**
2. **å¯ç”¨ GitHub Pages**ï¼š
   - è¿›å…¥ä»“åº“è®¾ç½® â†’ Pages
   - Source é€‰æ‹© "GitHub Actions"
3. **æ¨é€ä»£ç åˆ° main åˆ†æ”¯**ï¼ŒGitHub Actions ä¼šè‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²

#### æ‰‹åŠ¨éƒ¨ç½²
```bash
# æ„å»ºå‰ç«¯ï¼ˆé€‚ç”¨äºGitHub Pagesï¼‰
cd frontend
npm run build:github

# éƒ¨ç½²æ–‡ä»¶ä¼šåœ¨ build/ ç›®å½•ä¸­
```

#### è®¿é—®åœ°å€
- **ç®¡ç†ç³»ç»Ÿ**: `https://æ‚¨çš„ç”¨æˆ·å.github.io/ä»“åº“å`
- **éªŒè¯é¡µé¢**: `https://æ‚¨çš„ç”¨æˆ·å.github.io/ä»“åº“å/check/sticker.html`

### ğŸŒ Vercel å…¨æ ˆéƒ¨ç½²ï¼ˆæ¨èï¼‰

#### å‰ç«¯ + åç«¯ä¸€èµ·éƒ¨ç½²åˆ°Vercel

**ä¼˜åŠ¿**ï¼š
- âœ… å‰åç«¯ç»Ÿä¸€ç®¡ç†
- âœ… æ— æœåŠ¡å™¨æ¶æ„ï¼ŒæŒ‰éœ€ä»˜è´¹
- âœ… å…¨çƒCDNåŠ é€Ÿ
- âœ… è‡ªåŠ¨HTTPSå’ŒåŸŸåç®¡ç†

**å¿«é€Ÿéƒ¨ç½²**ï¼š

1. **éƒ¨ç½²åç«¯API**ï¼š
```bash
# å®‰è£…Vercel CLI
npm i -g vercel

# éƒ¨ç½²åç«¯
vercel --config vercel-backend.json --prod

# è®¾ç½®ç¯å¢ƒå˜é‡
vercel env add JWT_SECRET production
```

2. **éƒ¨ç½²å‰ç«¯**ï¼š
```bash
cd legal.consulargo.io/frontend
vercel --prod

# è®¾ç½®APIåœ°å€
vercel env add REACT_APP_API_URL production
# è¾“å…¥: https://your-backend.vercel.app/api
```

3. **è®¿é—®åº”ç”¨**ï¼š
- **åç«¯API**: `https://your-backend.vercel.app/api`
- **å‰ç«¯åº”ç”¨**: `https://your-frontend.vercel.app`

ğŸ“– **è¯¦ç»†æ­¥éª¤è¯·æŸ¥çœ‹** [`VERCEL_DEPLOY.md`](VERCEL_DEPLOY.md)

#### ä»…å‰ç«¯éƒ¨ç½²åˆ°Vercel + GitHub Pages

1. **è¿æ¥GitHubä»“åº“**åˆ°Vercel
2. **é…ç½®æ„å»ºè®¾ç½®**ï¼š
   - Build Command: `npm run build`
   - Output Directory: `build`
3. **è®¾ç½®ç¯å¢ƒå˜é‡**ï¼š
   - `REACT_APP_API_URL`: åç«¯APIåœ°å€

### ğŸ–¥ï¸ ä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²

#### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
1. ä¿®æ”¹ç¯å¢ƒå˜é‡é…ç½®
2. æ„å»ºå‰ç«¯åº”ç”¨ï¼š`npm run build`
3. å¯åŠ¨åç«¯æœåŠ¡ï¼š`npm start`
4. é…ç½®åå‘ä»£ç†ï¼ˆå¦‚Nginxï¼‰

#### ç¯å¢ƒå˜é‡
- `PORT`: æœåŠ¡ç«¯å£ï¼ˆé»˜è®¤3000ï¼‰
- `JWT_SECRET`: JWTå¯†é’¥
- `NODE_ENV`: ç¯å¢ƒæ¨¡å¼
- `DATABASE_PATH`: æ•°æ®åº“æ–‡ä»¶è·¯å¾„
- `BASE_URL`: åº”ç”¨åŸºç¡€URL
- `CORS_ORIGIN`: å…è®¸çš„è·¨åŸŸæº

## æ³¨æ„äº‹é¡¹

1. **å®‰å…¨æ€§**: ç”Ÿäº§ç¯å¢ƒè¯·ä¿®æ”¹é»˜è®¤å¯†ç å’ŒJWTå¯†é’¥
2. **æ•°æ®åº“**: ç³»ç»Ÿä½¿ç”¨SQLiteï¼Œé€‚åˆä¸­å°å‹åº”ç”¨
3. **æ–‡ä»¶å­˜å‚¨**: äºŒç»´ç å›¾ç‰‡å­˜å‚¨åœ¨æœåŠ¡å™¨æœ¬åœ°
4. **CORS**: å¼€å‘ç¯å¢ƒå·²é…ç½®CORSï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦è°ƒæ•´
5. **å¤‡ä»½**: å®šæœŸå¤‡ä»½æ•°æ®åº“æ–‡ä»¶

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **ç«¯å£å†²çª**: ä¿®æ”¹config.envä¸­çš„PORTé…ç½®
2. **æ•°æ®åº“é”™è¯¯**: æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™
3. **äºŒç»´ç ç”Ÿæˆå¤±è´¥**: æ£€æŸ¥uploadsç›®å½•æƒé™
4. **å‰ç«¯æ— æ³•è¿æ¥åç«¯**: æ£€æŸ¥APIåœ°å€é…ç½®

### æ—¥å¿—æŸ¥çœ‹
- åç«¯æ—¥å¿—åœ¨æ§åˆ¶å°è¾“å‡º
- å‰ç«¯é”™è¯¯åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹

## ğŸ”§ GitHub éƒ¨ç½²è¯¦ç»†æ­¥éª¤

### 1. å‡†å¤‡GitHubä»“åº“
```bash
# å¦‚æœè¿˜æ²¡æœ‰æ¨é€åˆ°GitHub
git init
git add .
git commit -m "Initial commit"
git branch -M main
git remote add origin https://github.com/æ‚¨çš„ç”¨æˆ·å/legal-admin-system.git
git push -u origin main
```

### 2. å¯ç”¨GitHub Pages
1. è¿›å…¥GitHubä»“åº“é¡µé¢
2. ç‚¹å‡» **Settings** æ ‡ç­¾é¡µ
3. åœ¨å·¦ä¾§èœå•ä¸­æ‰¾åˆ° **Pages**
4. åœ¨ **Source** ä¸‹é€‰æ‹© **GitHub Actions**

### 3. é…ç½®è‡ªåŠ¨éƒ¨ç½²
- GitHub Actionså·¥ä½œæµå·²é…ç½®åœ¨ `.github/workflows/static-deploy.yml`
- æ¯æ¬¡æ¨é€åˆ°mainåˆ†æ”¯éƒ½ä¼šè‡ªåŠ¨è§¦å‘éƒ¨ç½²
- æ„å»ºå®Œæˆåå¯åœ¨ `https://æ‚¨çš„ç”¨æˆ·å.github.io/ä»“åº“å` è®¿é—®

### 4. åç«¯APIéƒ¨ç½²ï¼ˆå¯é€‰ï¼‰
ç”±äºGitHub Pagesåªæ”¯æŒé™æ€æ–‡ä»¶ï¼Œåç«¯éœ€è¦å•ç‹¬éƒ¨ç½²ï¼š

#### é€‰é¡¹Aï¼šHeroku/Railway/Render éƒ¨ç½²åç«¯
```bash
# è¿›å…¥backendç›®å½•
cd backend

# å¦‚æœä½¿ç”¨Heroku
heroku create your-app-name
git subtree push --prefix backend heroku main
```

#### é€‰é¡¹Bï¼šæ— æœåŠ¡å™¨å‡½æ•°ï¼ˆVercel/Netlify Functionsï¼‰
å¯ä»¥å°†APIè½¬æ¢ä¸ºæ— æœåŠ¡å™¨å‡½æ•°éƒ¨ç½²

### 5. æ›´æ–°å‰ç«¯APIé…ç½®
åœ¨ `frontend/src/config/index.ts` ä¸­æ›´æ–° `apiUrl`ï¼š
```typescript
apiUrl: 'https://your-backend-api.com/api'
```

## ğŸ¯ å¿«é€Ÿä½“éªŒ

æƒ³è¦å¿«é€Ÿä½“éªŒç³»ç»ŸåŠŸèƒ½ï¼Ÿ

1. **Fork è¿™ä¸ªä»“åº“**
2. **å¯ç”¨ GitHub Pages** (è®¾ç½® â†’ Pages â†’ GitHub Actions)
3. **ç­‰å¾…è‡ªåŠ¨éƒ¨ç½²å®Œæˆ** (çº¦2-3åˆ†é’Ÿ)
4. **è®¿é—®æ‚¨çš„éƒ¨ç½²é“¾æ¥**

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- å®Œæ•´çš„åå°ç®¡ç†ç³»ç»Ÿ
- åŠ¨æ€å±•ç¤ºé¡µé¢
- äºŒç»´ç ç”Ÿæˆå’Œä¸‹è½½åŠŸèƒ½
- GitHub Pages è‡ªåŠ¨éƒ¨ç½²æ”¯æŒ
