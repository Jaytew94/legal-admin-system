{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Row,Col,Card,Statistic,Table,Button,Space}from'antd';import{FileTextOutlined,UserOutlined,CheckCircleOutlined,ClockCircleOutlined}from'@ant-design/icons';import{useNavigate}from'react-router-dom';import{recordService}from'../services/recordService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[stats,setStats]=useState({totalRecords:0,activeRecords:0,inactiveRecords:0});const[recentRecords,setRecentRecords]=useState([]);const[loading,setLoading]=useState(true);const navigate=useNavigate();useEffect(()=>{loadDashboardData();},[]);const loadDashboardData=async()=>{try{const[recordsResponse]=await Promise.all([recordService.getRecords({page:1,limit:5})]);const records=recordsResponse.records;const totalRecords=recordsResponse.pagination.total;const activeRecords=records.filter(r=>r.status==='active').length;const inactiveRecords=totalRecords-activeRecords;setStats({totalRecords,activeRecords,inactiveRecords});setRecentRecords(records);}catch(error){console.error('Failed to load dashboard data:',error);}finally{setLoading(false);}};const columns=[{title:'QR码',dataIndex:'qr_code',key:'qr_code',width:120},{title:'法律编号',dataIndex:'legalization_no',key:'legalization_no'},{title:'文档所有者',dataIndex:'document_owner',key:'document_owner'},{title:'状态',dataIndex:'status',key:'status',render:status=>/*#__PURE__*/_jsx(\"span\",{style:{color:status==='active'?'#52c41a':'#ff4d4f',fontWeight:'bold'},children:status==='active'?'活跃':'隐藏'})},{title:'创建时间',dataIndex:'created_at',key:'created_at',render:date=>new Date(date).toLocaleDateString('zh-CN')},{title:'操作',key:'action',render:(_,record)=>/*#__PURE__*/_jsx(Space,{size:\"small\",children:/*#__PURE__*/_jsx(Button,{type:\"link\",size:\"small\",onClick:()=>navigate(\"/records/edit/\".concat(record.id)),children:\"\\u7F16\\u8F91\"})})}];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{marginBottom:'24px'},children:\"\\u4EEA\\u8868\\u677F\"}),/*#__PURE__*/_jsxs(Row,{gutter:16,style:{marginBottom:'24px'},children:[/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"\\u603B\\u8BB0\\u5F55\\u6570\",value:stats.totalRecords,prefix:/*#__PURE__*/_jsx(FileTextOutlined,{}),valueStyle:{color:'#1890ff'}})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"\\u6D3B\\u8DC3\\u8BB0\\u5F55\",value:stats.activeRecords,prefix:/*#__PURE__*/_jsx(CheckCircleOutlined,{}),valueStyle:{color:'#52c41a'}})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"\\u9690\\u85CF\\u8BB0\\u5F55\",value:stats.inactiveRecords,prefix:/*#__PURE__*/_jsx(ClockCircleOutlined,{}),valueStyle:{color:'#faad14'}})})}),/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"\\u7528\\u6237\\u6570\",value:1,prefix:/*#__PURE__*/_jsx(UserOutlined,{}),valueStyle:{color:'#722ed1'}})})})]}),/*#__PURE__*/_jsx(Row,{gutter:16,style:{marginBottom:'24px'},children:/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Card,{title:\"\\u5FEB\\u901F\\u64CD\\u4F5C\",children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>navigate('/records/add'),children:\"\\u6DFB\\u52A0\\u65B0\\u8BB0\\u5F55\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate('/records'),children:\"\\u67E5\\u770B\\u6240\\u6709\\u8BB0\\u5F55\"})]})})})}),/*#__PURE__*/_jsx(Row,{gutter:16,children:/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Card,{title:\"\\u6700\\u8FD1\\u8BB0\\u5F55\",extra:/*#__PURE__*/_jsx(Button,{type:\"link\",onClick:()=>navigate('/records'),children:\"\\u67E5\\u770B\\u5168\\u90E8\"}),children:/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:recentRecords,rowKey:\"id\",pagination:false,loading:loading,size:\"small\"})})})})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Row","Col","Card","Statistic","Table","Button","Space","FileTextOutlined","UserOutlined","CheckCircleOutlined","ClockCircleOutlined","useNavigate","recordService","jsx","_jsx","jsxs","_jsxs","Dashboard","stats","setStats","totalRecords","activeRecords","inactiveRecords","recentRecords","setRecentRecords","loading","setLoading","navigate","loadDashboardData","recordsResponse","Promise","all","getRecords","page","limit","records","pagination","total","filter","r","status","length","error","console","columns","title","dataIndex","key","width","render","style","color","fontWeight","children","date","Date","toLocaleDateString","_","record","size","type","onClick","concat","id","marginBottom","gutter","span","value","prefix","valueStyle","extra","dataSource","rowKey"],"sources":["/Users/jayt/Desktop/legal.consulargo.io/legal-admin-system/legal.consulargo.io/frontend/src/pages/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Row, Col, Card, Statistic, Table, Button, Space } from 'antd';\nimport { FileTextOutlined, UserOutlined, CheckCircleOutlined, ClockCircleOutlined } from '@ant-design/icons';\nimport { useNavigate } from 'react-router-dom';\nimport { recordService, Record } from '../services/recordService';\n\nconst Dashboard: React.FC = () => {\n  const [stats, setStats] = useState({\n    totalRecords: 0,\n    activeRecords: 0,\n    inactiveRecords: 0,\n  });\n  const [recentRecords, setRecentRecords] = useState<Record[]>([]);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    loadDashboardData();\n  }, []);\n\n  const loadDashboardData = async () => {\n    try {\n      const [recordsResponse] = await Promise.all([\n        recordService.getRecords({ page: 1, limit: 5 }),\n      ]);\n\n      const records = recordsResponse.records;\n      const totalRecords = recordsResponse.pagination.total;\n      const activeRecords = records.filter(r => r.status === 'active').length;\n      const inactiveRecords = totalRecords - activeRecords;\n\n      setStats({\n        totalRecords,\n        activeRecords,\n        inactiveRecords,\n      });\n      setRecentRecords(records);\n    } catch (error) {\n      console.error('Failed to load dashboard data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const columns = [\n    {\n      title: 'QR码',\n      dataIndex: 'qr_code',\n      key: 'qr_code',\n      width: 120,\n    },\n    {\n      title: '法律编号',\n      dataIndex: 'legalization_no',\n      key: 'legalization_no',\n    },\n    {\n      title: '文档所有者',\n      dataIndex: 'document_owner',\n      key: 'document_owner',\n    },\n    {\n      title: '状态',\n      dataIndex: 'status',\n      key: 'status',\n      render: (status: string) => (\n        <span style={{ \n          color: status === 'active' ? '#52c41a' : '#ff4d4f',\n          fontWeight: 'bold'\n        }}>\n          {status === 'active' ? '活跃' : '隐藏'}\n        </span>\n      ),\n    },\n    {\n      title: '创建时间',\n      dataIndex: 'created_at',\n      key: 'created_at',\n      render: (date: string) => new Date(date).toLocaleDateString('zh-CN'),\n    },\n    {\n      title: '操作',\n      key: 'action',\n      render: (_: any, record: Record) => (\n        <Space size=\"small\">\n          <Button \n            type=\"link\" \n            size=\"small\"\n            onClick={() => navigate(`/records/edit/${record.id}`)}\n          >\n            编辑\n          </Button>\n        </Space>\n      ),\n    },\n  ];\n\n  return (\n      <div>\n        <h1 style={{ marginBottom: '24px' }}>仪表板</h1>\n        \n        {/* 统计卡片 */}\n        <Row gutter={16} style={{ marginBottom: '24px' }}>\n          <Col span={6}>\n            <Card>\n              <Statistic\n                title=\"总记录数\"\n                value={stats.totalRecords}\n                prefix={<FileTextOutlined />}\n                valueStyle={{ color: '#1890ff' }}\n              />\n            </Card>\n          </Col>\n          <Col span={6}>\n            <Card>\n              <Statistic\n                title=\"活跃记录\"\n                value={stats.activeRecords}\n                prefix={<CheckCircleOutlined />}\n                valueStyle={{ color: '#52c41a' }}\n              />\n            </Card>\n          </Col>\n          <Col span={6}>\n            <Card>\n              <Statistic\n                title=\"隐藏记录\"\n                value={stats.inactiveRecords}\n                prefix={<ClockCircleOutlined />}\n                valueStyle={{ color: '#faad14' }}\n              />\n            </Card>\n          </Col>\n          <Col span={6}>\n            <Card>\n              <Statistic\n                title=\"用户数\"\n                value={1}\n                prefix={<UserOutlined />}\n                valueStyle={{ color: '#722ed1' }}\n              />\n            </Card>\n          </Col>\n        </Row>\n\n        {/* 快速操作 */}\n        <Row gutter={16} style={{ marginBottom: '24px' }}>\n          <Col span={24}>\n            <Card title=\"快速操作\">\n              <Space>\n                <Button \n                  type=\"primary\" \n                  onClick={() => navigate('/records/add')}\n                >\n                  添加新记录\n                </Button>\n                <Button onClick={() => navigate('/records')}>\n                  查看所有记录\n                </Button>\n              </Space>\n            </Card>\n          </Col>\n        </Row>\n\n        {/* 最近记录 */}\n        <Row gutter={16}>\n          <Col span={24}>\n            <Card \n              title=\"最近记录\" \n              extra={\n                <Button type=\"link\" onClick={() => navigate('/records')}>\n                  查看全部\n                </Button>\n              }\n            >\n              <Table\n                columns={columns}\n                dataSource={recentRecords}\n                rowKey=\"id\"\n                pagination={false}\n                loading={loading}\n                size=\"small\"\n              />\n            </Card>\n          </Col>\n        </Row>\n      </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}