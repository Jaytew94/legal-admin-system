{"ast":null,"code":"import _objectSpread from\"/Users/jayt/Desktop/legal.consulargo.io/legal-admin-system/legal.consulargo.io/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Form,Input,DatePicker,Button,Card,message,Space}from'antd';import{SaveOutlined,ArrowLeftOutlined}from'@ant-design/icons';import{useNavigate}from'react-router-dom';import{recordService}from'../services/recordService';import dayjs from'dayjs';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddRecord=()=>{const[loading,setLoading]=useState(false);const[form]=Form.useForm();const navigate=useNavigate();const onFinish=async values=>{setLoading(true);try{const recordData=_objectSpread(_objectSpread({},values),{},{issue_date:values.issue_date.format('YYYY-MM-DD')});const response=await recordService.createRecord(recordData);message.success('记录创建成功！');// 显示生成的QR码信息\nmessage.info(\"QR\\u7801: \".concat(response.record.qr_code));navigate('/records');}catch(error){var _error$response,_error$response$data;message.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'创建记录失败');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:16},children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(ArrowLeftOutlined,{}),onClick:()=>navigate('/records'),children:\"\\u8FD4\\u56DE\"}),/*#__PURE__*/_jsx(\"h1\",{style:{margin:0},children:\"\\u6DFB\\u52A0\\u65B0\\u8BB0\\u5F55\"})]})}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Form,{form:form,layout:\"vertical\",onFinish:onFinish,initialValues:{issue_date:dayjs(),place_of_issue:'SKA',legalization_type:'SEEN AT THE MINISTRY OF FOREIGN AFFAIRS'},children:[/*#__PURE__*/_jsx(Form.Item,{name:\"legalization_no\",label:\"\\u6CD5\\u5F8B\\u7F16\\u53F7\",rules:[{required:true,message:'请输入法律编号'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u4F8B\\u5982: SKAKP5V-001\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"issue_date\",label:\"\\u53D1\\u5E03\\u65E5\\u671F\",rules:[{required:true,message:'请选择发布日期'}],children:/*#__PURE__*/_jsx(DatePicker,{style:{width:'100%'}})}),/*#__PURE__*/_jsx(Form.Item,{name:\"place_of_issue\",label:\"\\u53D1\\u5E03\\u5730\\u70B9\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u4F8B\\u5982: SKA\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"legalization_type\",label:\"\\u8BA4\\u8BC1\\u7C7B\\u578B\",rules:[{required:true,message:'请输入认证类型'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u4F8B\\u5982: SEEN AT THE MINISTRY OF FOREIGN AFFAIRS\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"authorized_officer\",label:\"\\u6388\\u6743\\u5B98\\u5458\",rules:[{required:true,message:'请输入授权官员姓名'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u4F8B\\u5982: MISS SAMARIN SIRISAWAT\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"document_owner\",label:\"\\u6587\\u6863\\u6240\\u6709\\u8005\",rules:[{required:true,message:'请输入文档所有者姓名'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u4F8B\\u5982: MISS UNYANEE KHAOWISET\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"document_type\",label:\"\\u6587\\u6863\\u7C7B\\u578B\",rules:[{required:true,message:'请输入文档类型'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u4F8B\\u5982: CERTIFICATE OF BIRTH\"})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",loading:loading,icon:/*#__PURE__*/_jsx(SaveOutlined,{}),children:\"\\u4FDD\\u5B58\\u8BB0\\u5F55\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate('/records'),children:\"\\u53D6\\u6D88\"})]})})]})})]});};export default AddRecord;","map":{"version":3,"names":["React","useState","Form","Input","DatePicker","Button","Card","message","Space","SaveOutlined","ArrowLeftOutlined","useNavigate","recordService","dayjs","jsx","_jsx","jsxs","_jsxs","AddRecord","loading","setLoading","form","useForm","navigate","onFinish","values","recordData","_objectSpread","issue_date","format","response","createRecord","success","info","concat","record","qr_code","error","_error$response","_error$response$data","data","children","style","marginBottom","icon","onClick","margin","layout","initialValues","place_of_issue","legalization_type","Item","name","label","rules","required","placeholder","width","type","htmlType"],"sources":["/Users/jayt/Desktop/legal.consulargo.io/legal-admin-system/legal.consulargo.io/frontend/src/pages/AddRecord.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Form, Input, DatePicker, Button, Card, message, Space } from 'antd';\nimport { SaveOutlined, ArrowLeftOutlined } from '@ant-design/icons';\nimport { useNavigate } from 'react-router-dom';\nimport { recordService } from '../services/recordService';\nimport dayjs from 'dayjs';\n\nconst AddRecord: React.FC = () => {\n  const [loading, setLoading] = useState(false);\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n\n  const onFinish = async (values: any) => {\n    setLoading(true);\n    try {\n      const recordData = {\n        ...values,\n        issue_date: values.issue_date.format('YYYY-MM-DD'),\n      };\n\n      const response = await recordService.createRecord(recordData);\n      message.success('记录创建成功！');\n      \n      // 显示生成的QR码信息\n      message.info(`QR码: ${response.record.qr_code}`);\n      \n      navigate('/records');\n    } catch (error: any) {\n      message.error(error.response?.data?.error || '创建记录失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div>\n        <div style={{ marginBottom: 16 }}>\n          <Space>\n            <Button \n              icon={<ArrowLeftOutlined />} \n              onClick={() => navigate('/records')}\n            >\n              返回\n            </Button>\n            <h1 style={{ margin: 0 }}>添加新记录</h1>\n          </Space>\n        </div>\n\n        <Card>\n          <Form\n            form={form}\n            layout=\"vertical\"\n            onFinish={onFinish}\n            initialValues={{\n              issue_date: dayjs(),\n              place_of_issue: 'SKA',\n              legalization_type: 'SEEN AT THE MINISTRY OF FOREIGN AFFAIRS',\n            }}\n          >\n            <Form.Item\n              name=\"legalization_no\"\n              label=\"法律编号\"\n              rules={[{ required: true, message: '请输入法律编号' }]}\n            >\n              <Input placeholder=\"例如: SKAKP5V-001\" />\n            </Form.Item>\n\n            <Form.Item\n              name=\"issue_date\"\n              label=\"发布日期\"\n              rules={[{ required: true, message: '请选择发布日期' }]}\n            >\n              <DatePicker style={{ width: '100%' }} />\n            </Form.Item>\n\n            <Form.Item\n              name=\"place_of_issue\"\n              label=\"发布地点\"\n            >\n              <Input placeholder=\"例如: SKA\" />\n            </Form.Item>\n\n            <Form.Item\n              name=\"legalization_type\"\n              label=\"认证类型\"\n              rules={[{ required: true, message: '请输入认证类型' }]}\n            >\n              <Input placeholder=\"例如: SEEN AT THE MINISTRY OF FOREIGN AFFAIRS\" />\n            </Form.Item>\n\n            <Form.Item\n              name=\"authorized_officer\"\n              label=\"授权官员\"\n              rules={[{ required: true, message: '请输入授权官员姓名' }]}\n            >\n              <Input placeholder=\"例如: MISS SAMARIN SIRISAWAT\" />\n            </Form.Item>\n\n            <Form.Item\n              name=\"document_owner\"\n              label=\"文档所有者\"\n              rules={[{ required: true, message: '请输入文档所有者姓名' }]}\n            >\n              <Input placeholder=\"例如: MISS UNYANEE KHAOWISET\" />\n            </Form.Item>\n\n            <Form.Item\n              name=\"document_type\"\n              label=\"文档类型\"\n              rules={[{ required: true, message: '请输入文档类型' }]}\n            >\n              <Input placeholder=\"例如: CERTIFICATE OF BIRTH\" />\n            </Form.Item>\n\n            <Form.Item>\n              <Space>\n                <Button\n                  type=\"primary\"\n                  htmlType=\"submit\"\n                  loading={loading}\n                  icon={<SaveOutlined />}\n                >\n                  保存记录\n                </Button>\n                <Button onClick={() => navigate('/records')}>\n                  取消\n                </Button>\n              </Space>\n            </Form.Item>\n          </Form>\n        </Card>\n      </div>\n  );\n};\n\nexport default AddRecord;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}